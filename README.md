# Pygame_Scroll_Jump_game
Google Chrome の恐竜ゲームを模したアクションゲーム

☆概要
大学のプログラミングA2にて習ったPythonのPygameライブラリの知識を応用して、Google Chromeの恐竜ゲームを作成。した。

☆ゲーム説明
画面左の主人公が流れてくる障害物をジャンプを駆使して避け続けるゲーム。
Google Chromeの恐竜ゲームと異なる点は、右端から画面を覆う闇の存在だ。
闇が迫ってくると障害物を視認できる範囲が少なくな、避けることが難しくなる。
しかし、画面に表示される的(マウスカーソルのイラストが描かれた黒枠)にカーソルを合わせることで、闇を少し退けることができる。だが、その間はジャンプを行うことができない。
ジャンプで敵を避けながら闇を退けて、長く生き残れ！

☆ゲーム操作方法
マウスカーソルのイラストが描かれた黒枠からマウスカーソルを外すと、SPACEキーでジャンプを行うことができるが闇が迫ってきます。
マウスカーソルのイラストが描かれた黒枠にマウスカーソルを合わせると、迫ってくる闇が徐々に戻っていきますがSPACEキーでジャンプを行うことができなくなります。

-------------------------------

☆プログラムの構造
このゲームは、主人公を定義するhero.py、植物を定義するplant.py、鳥を定義するbird.py、的を定義するtarget.pyの4つのモジュールを用いてゲーム全体の処理を組んだgame.py、ゲームを動かすためのmain.pyの合計6つのプログラムから成っている。
また、その時用いた画像も同じディレクトリ内に置かれている。

① hero.py
hero.pyでは、このゲームにおける主人公を定義している。
このプログラム内では、主人公の画像とその領域を読み取り、その領域と同じ大きさの判定領域を画像に結び付けている。
また、ジャンプする際に座標が変更されるため、座標を更新するための関数も設定されている。

② plant.py
plant.pyでは、このゲームの障害物の1つである植物の定義をしている。
このプログラム内では、植物の画像とその領域を読み取り、その領域と同じ大きさの判定領域を画像に結び付けている。
また、植物がスクロールされる際に座標が変更されるため、座標を更新するための関数も設定されている。

③ bird.py
bird.pyでは、このゲームの種が異物の1つである鳥の定義をしている。
このプログラム内では、鳥の画像とその領域を読み取り、その領域と同じ大きさの判定領域を画像に結び付けている。
また、鳥がスクロールされる際に座標が変更されるため、座標を更新するための関数も設定されている。

④ target.py
target.pyでは、このゲームの的を定義している。
このプログラム内では、的の画像とその領域を読み取り、その領域と同じ大きさの判定領域を画像に結び付けている。
また、的が移動する際やランダムな位置に再配置する際に座標が変更されるため、座標を更新するための関数も設定している。

⑤ game.py
game.pyでは、主人公、植物、鳥、的の動作を含めた、ゲーム全体の動作を設定している。

ア.	初期設定
初期設定では、pygameの初期化、ウィンドウの描画、関数の呼び出し、文字の設定、各種変数の設定などを行っている。
ウィンドウの設定では、maind.pyで呼び出す際の引数をウィンドウサイズとウィンドウ名を設定している。
関数の呼び出しでは、フレームを管理する関数を呼び出している。文字の設定では、文字のフォントは設定せず文字の大きさを30と指定している。

イ.	ゲーム全体の動き
ゲーム全体の動きでは、×ボタンの機能化とフレームの管理をしている。
×ボタンの管理では、フレームの管理では、フレームの切り替えとフレームのカウント、秒数のカウントの他に、植物基準と鳥基準のフレームカウントを行っている。

ウ.	主人公の動き
主人公の処理では、主人公の画像切り替えとジャンプの処理を行う。
フレームの切り替えでは、歩いてる2枚の画像を交互に表示することで、位置を固定しながらも主人公が進んでいるように見せている。
的の中にポインタが合わさっている状態でスペースキーを押すと主人公をジャンプさせ、着地するまでの間主人公に重力をかける。
ジャンプ中はジャンプしている画像に切り替える。

エ.	植物の動き
植物の処理では、主人公が植物を超えた際の得点処理と植物の配置、主人公との衝突判定を設定している。
得点処理では、主人公の領域のX座標と植物の領域のX座標が重なっている間は、1フレーム当たり25点を得点に加算する。
衝突判定では、主人公の領域と植物の領域が重なったらゲームを終了させる処理を行う。
植物を配置する処理は、配置する間隔を地域を決めたランダムな値のに定め、間隔が経過したら新たな植物を配置する。

オ.	鳥の動き
鳥の処理では、主人公が鳥を超えた際の得点処理と鳥の配置、主人公との衝突判定を設定している。
得点処理では、主人公の領域のX座標と鳥の領域のX座標が重なっている間は、1フレーム当たり50点を得点に加算する。
衝突判定では、主人公の領域と鳥の領域が重なったらゲームを終了させる処理を行う。
鳥を配置する処理は、配置する間隔を地域を決めたランダムな値のに定め、間隔が経過したら新たな植物を配置する。
また、鳥は1秒に一回画像を切り替えることで、飛んでいる動きを表すことができている。

カ.	的の動き
的の処理では、的が移動する方向の設定、的のランダムな位置への再配置、壁にあたったときの跳ね返りを設定している。
的が移動する処理は、時間と共に広くなる地域の中でランダムな方向と移動速度で移動する。
移動方向の変更は5秒に１回、地域の広がりは１５秒に１回行われる。
的のランダムな位置への再配置では、ウィンドウ内のランダムな位置へ座標を更新する。
再配置は最初は20秒に1回行われ、再配置のたびに次の再配置までの時間を0.9倍する。
壁に当ったときの跳ね返りは、端に当ったときに上下に当ったらVYを、左右に当ったらVXを反転している。

キ.	壁の動き
壁の処理では、壁が迫る処理と壁が戻る処理を設定している。
壁が迫る処理では、横の壁は3、縦の動きでは2の速度で迫る。
的にカーソルが入っているときは。縦横共に1の速度で戻る。

ク.	描画
描画の設定では、各要素の更新、地平線や壁の描画、秒数と得点の描画を行っている。

ケ.	停止処理
停止処理では、主人公が障害物と衝突した際と×ボタンが押された際にプログラムを終了する処理を行う。

⑥ main.py
main.pyでは、game.pyで設定した処理を実行する。

☆引用
・　ちゃるまが！「ちびマリオドット絵 Pixel Marrio Arts」より一部の画像
　　URL：https://charmaga.hatenablog.com/entry/2019/11/26/235336
　　閲覧日：2022/01/23

・　Chromeの恐竜ゲームより一部の画像
　　URL：Chrome://dino/ (Google Chromeにて)
　　閲覧日：2022/01/25
